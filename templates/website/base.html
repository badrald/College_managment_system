<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    {% load static %}

    <link
      rel="shortcut icon"
      href="{% static 'website/images/cet_logo.png' %}"
      class="rounded-circle"
      type="image/x-icon" />
    <title>{% block title %}{% endblock title %}</title>

    <!-- Additional CSS Files -->

    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'website/css/font-awesome.css' %}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'bootstrap/bootstrap.css' %}" />

    <link rel="stylesheet" href="{% static 'website/css/style.css' %}" />

    <link rel="stylesheet" href="{% static 'website/css/owl-carousel.css' %}" />

    <link rel="stylesheet" href="{% static 'website/css/lightbox.css' %}" />
    {% block custom_css %}{% endblock custom_css %}
    
  </head>
  
  <!---->
  
  <body>
    <style>

    </style>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
      <div class="jumper">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <!-- ***** Preloader End ***** -->
    
    {% include "./parts/header.html" %} {% block content %} {% endblock %} 
    {% include "./parts/footer.html" %}
    
    <!--**** login form start ****-->
    {% if not user.is_authenticated %}
      <div
          class="modal fade"
          id="loginModal"
          tabindex="-1"
          aria-labelledby="loginModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content card border-light-subtle shadow-sm" dir="rtl">
              <div class="row g-0">
                <div
                class="col-12 col-md-6 d-flex align-items-center justify-content-center">
                    <div class="col-12 col-lg-11 col-xl-10">
                      <div class="card-body p-3 p-md-4 p-xl-5">
                        <div class="row">
                          <div class="col-12">
                            <div class="mb-5">
                              <div class="text-center mb-4">
                                <a href="#!">
                                  <img
                                  src="{% static 'website/images/cet_logo_banner.png' %}"
                                  alt="شعار الكلية"
                                    width="100%"
                                    height="100%" />
                                  </a>
                              </div>
                              <h4 class="text-center">اهلا بعودتك من جديد</h4>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="d-flex gap-3 flex-column">
                              <a href="#!" class="btn btn-lg btn-outline-dark">
                                <span class="ms-2 fs-6">التسجيل عن طريق جوجل </span>
                                <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                fill="currentColor"
                                class="bi bi-google"
                                viewBox="0 0 16 16">
                                <path
                                    d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z" />
                                </svg>
                              </a>
                            </div>
                            <p class="text-center mt-4 mb-5">
                              او قم بتسجيل الدخول عبر
                            </p>
                          </div>
                        </div>
                        <form action="" method="POST">
                          <p class="hidden" id="stautsMsg"></p>
                          <div class="row gy-3 overflow-hidden">
                            <div class="col-12">
                              <div class="form-floating mb-3">
                                <input
                                type="text"
                                class="form-control"
                                name="username"
                                id="username"
                                placeholder="Mohamed_20"
                                required />
                                <label for="username" class="form-label"
                                >اسم المستخدم </label
                                >
                              </div>
                            </div>
                            <div class="col-12">
                              <div class="form-floating mb-3">
                                <input
                                  type="password"
                                  class="form-control"
                                  name="password"
                                  id="password"
                                  value=""
                                  placeholder="Password"
                                  required />
                                  <label for="password" class="form-label"
                                  >كلمة المرور</label
                                >
                              </div>
                            </div>
                            <div class="col-12">
                              <div class="form-check">
                                <input
                                class="form-check-input"
                                type="checkbox"
                                value=""
                                name="remember_me"
                                id="remember_me" />
                                <label
                                class="form-check-label text-secondary"
                                for="remember_me">
                                Keep me logged in
                              </label>
                            </div>
                            </div>
                            <div class="col-12">
                              <div class="d-grid">
                                <button
                                class="btn btn-outline-primary btn-lg"
                                id="submitBtn"
                                type="submit">
                                تسجيل الدخول
                              </button>
                            </div>
                          </div>
                          </div>
                        </form>
                        <div class="row">
                          <div class="col-12">
                            <div
                            class="d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-center mt-5">
                            <a href="#!" class="link-secondary text-decoration-none"
                            >نسيت كلمة المرور ؟
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <button
                      type="button"
                      class="btn-close bg-white position-absolute top-0 start-0 m-3"
                      data-bs-dismiss="modal"
                      aria-label="Close"></button>
                      <img
                      class="img-fluid rounded-start w-100 h-100 object-fit-cover"
                      loading="lazy"
                      src="{% static 'website/images/slide-14.jpg' %}"
                      alt="اهلا بعودتك " />
                    </div>
                  </div>
                </div>
              </div>
      </div>
      <!--**** login form end ****-->
    {% endif %}

      
      <!-- jQuery -->
      <script src="{% static 'website/js/jquery-2_1_0_min.js'%}"></script>
      
      <!-- Bootstrap -->
      
      <script src="{% static 'bootstrap/bootstrap_bundle_min.js' %}"></script>
    <script src="{% static 'website/js/popper.js' %}"></script>
    <script src="{% static 'website/js/bootstrap_min.js'%}"></script>
    
    {% block custom_javaScript %}{% endblock custom_javaScript %}
    <!-- Plugins -->
    <script src="{% static 'website/js/owl-carousel.js' %}"></script>
    <script src="{% static 'website/js/scrollreveal_min.js'%}"></script>
    <script src="{% static 'website/js/waypoints_min.js'%}"></script>
    <script src="{% static 'website/js/jquery_counterup_min.js'%}"></script>
    <script src="{% static 'website/js/imgfix_min.js'%}"></script>
    <script src="{% static 'website/js/slick.js' %}"></script>
    <script src="{% static 'website/js/lightbox.js'%}"></script>
    <script src="{% static 'website/js/isotope.js'%}"></script>
    
    <!-- Global Init -->
    <script src="{% static 'website/js/custom.js'%}"></script>
    <script>

    $("#submitBtn").on("click", function (e) {
    e.preventDefault();
    const username = $("#username").val();
    const password = $("#password").val();
    $.ajax({
      type: "POST",
      url: "{% url 'login_view' %}",
      data: {
        username: username,
        password: password,
        csrfmiddlewaretoken: "{{ csrf_token }}",
      },
      success: function (data) {
        // Redirect to the homepage on successful login
        console.log(data);
        $("#stautsMsg").removeClass("text-danger").addClass("text-info");
        $("#stautsMsg").text("تم تسجيل الدخول بنجاح ");
        setTimeout(function () {
          window.location.reload();        
        }, 2000);
      },
      error: function (xhr, status, error) {
        const errorMessage =
          xhr.responseJSON && xhr.responseJSON.error
            ? xhr.responseJSON.error
            : "هناك خطأ في الاتصال ";
        $("#stautsMsg").removeClass("text-info").addClass("text-danger");
        $("#stautsMsg").text(errorMessage);
        $("#username").val("");
        $("#password").val("");
      },
    });
  });

    </script>
    <script>
      $(function () {
        var selectedClass = "";
        $("p").click(function () {
          selectedClass = $(this).attr("data-rel");
          $("#portfolio").fadeTo(50, 0.1);
          $("#portfolio div")
          .not("." + selectedClass)
          .fadeOut();
          setTimeout(function () {
            $("." + selectedClass).fadeIn();
            $("#portfolio").fadeTo(50, 1);
          }, 500);
        });
      });
    </script>
  </body>
  </html>
